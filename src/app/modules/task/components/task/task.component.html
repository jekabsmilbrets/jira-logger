<form (ngSubmit)="onUpdate(task)"
      [formGroup]="formGroup">
  <mat-card>
    <mat-card-title>
      <ng-container *ngIf="!editMode">
        {{task.name}}
      </ng-container>

      <mat-form-field *ngIf="editMode">
        <mat-label>Task</mat-label>
        <input formControlName="name"
               matInput>
      </mat-form-field>
    </mat-card-title>

    <mat-card-content>
      <ng-container *ngIf="!editMode">
        {{task.description}}
      </ng-container>

      <mat-form-field *ngIf="editMode">
        <mat-label>Description</mat-label>
        <textarea formControlName="description"
                  matInput></textarea>
      </mat-form-field>

      <span *ngIf="task.timeLoggedToday > 59">
        Total Time Worked: {{ task.timeLoggedToday | readableTime }}
      </span>
    </mat-card-content>

    <mat-card-actions>
      <button (click)="toggleEditMode()"
              *ngIf="!editMode"
              aria-label="Edit"
              mat-icon-button>
        <mat-icon>edit</mat-icon>
      </button>
      
      <button (click)="toggleEditMode()"
              *ngIf="editMode"
              aria-label="Edit"
              mat-icon-button>
        <mat-icon>cancel</mat-icon>
      </button>

      <button *ngIf="editMode"
              [disabled]="!formGroup.valid"
              aria-label="Update"
              mat-icon-button
              type="submit">
        <mat-icon>save</mat-icon>
      </button>

      <button (click)="onRemove(task)"
              aria-label="Remove"
              color="warn"
              mat-icon-button>
        <mat-icon>delete</mat-icon>
      </button>

      <button (click)="onToggleTimeLog(task)"
              aria-label="Start Timer"
              color="primary"
              mat-icon-button>
        <mat-icon>timer</mat-icon>
        <mat-icon>{{task.lastTimeLogId ? 'pause' : 'play_arrow'}}</mat-icon>
      </button>
    </mat-card-actions>
  </mat-card>
</form>
