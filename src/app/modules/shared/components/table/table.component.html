<mat-table [dataSource]="dataSource"
           [matSortActive]="sortField"
           [matSortDirection]="sortDirection"
           matSort
           matSortDisableClear>
  <ng-container *ngFor="let column of columns"
                [cdkColumnDef]="column.columnDef">
    <mat-header-cell *cdkHeaderCellDef
                     [disabled]="!column.sortable"
                     [mat-sort-header]="column.columnDef"
                     [matTooltip]="column.header">
      {{ column.header }}
    </mat-header-cell>

    <mat-cell *cdkCellDef="let row"
              [matTooltip]="column.cell(row)">
      <span>{{ column.cell(row) }}</span>
    </mat-cell>
  </ng-container>

  <ng-container cdkColumnDef="select">
    <mat-header-cell *cdkHeaderCellDef>
      <mat-checkbox (change)="$event ? masterToggle() : null"
                    [checked]="selection.hasValue() && isAllSelected()"
                    [indeterminate]="selection.hasValue() && !isAllSelected()">
      </mat-checkbox>
    </mat-header-cell>

    <mat-cell *cdkCellDef="let row">
      <mat-checkbox (change)="$event ? selection.toggle(row) : null"
                    (click)="$event.stopPropagation()"
                    [checked]="selection.isSelected(row)">
      </mat-checkbox>
    </mat-cell>
  </ng-container>

  <mat-header-row *matHeaderRowDef="displayedColumns; sticky: stickyHeader"></mat-header-row>

  <ng-container *ngIf="!isSelectable">
    <mat-row *matRowDef="let row; columns: displayedColumns"></mat-row>
  </ng-container>

  <ng-container *ngIf="isSelectable">
    <mat-row (click)="selection.toggle(row)"
             *matRowDef="let row; columns: displayedColumns;"
             [ngClass]="{'selected': selection.isSelected(row)}">
    </mat-row>
  </ng-container>
</mat-table>

<mat-paginator [pageSizeOptions]="[5, 10, 20]"
               aria-label="Select page"
               showFirstLastButtons>
</mat-paginator>
